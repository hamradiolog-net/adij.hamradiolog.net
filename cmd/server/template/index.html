<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <title>ADIJ Proposal - ADIF as JSON</title>
    <link rel="stylesheet" href="/static/pico-2.1.1.indigo.min.css">
</head>

<body>
    <main class="container">
        <header>
            <hgroup>
                <h1>ADIF as JSON - A Proposal</h1>
                <h2>ADIJ Draft Proposal v1.0</h2>
            </hgroup>
        </header>
        <p>Lets improve the standard so that it doesn't require a PhD just to parse a log file.
            Something like JSON, the world's most ubiquitous data interchange format, ought to do!</p>
        <details>
            <summary role="button" class="secondary">ADIF as JSON Specification</summary>
            <article>
                <header>
                    <h1>ADIJ Specification</h1>
                    <small>Draft Proposal v1.0</small>
                </header>

                <h2>1. Overview</h2>
                <p>
                    ADIF as JSON (ADIJ) is a proposed modernization of the Amateur Data Interchange Format (ADIF) using
                    JSON structure.
                    This format aims to maintain interoperability with existing ADIF data while providing better
                    integration with modern software development practices.
                    The new .adij file format strictly adheres to the <a href="https://www.json.org/">JSON</a> / <a
                        href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">ECMA-404</a>
                    specification.
                </p>

                <h2>2. Specification</h2>

                <h3>2.1 Document Structure</h3>
                <ul>
                    <li>An ADIJ document MUST be valid JSON as defined by <a href="https://www.json.org/">JSON.org</a> /
                        <a
                            href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">ECMA-404</a>
                    </li>
                    <li>The document MUST be a single JSON object containing:
                        <ul>
                            <li>An optional "HEADER" object</li>
                            <li>A required "RECORDS" array of objects</li>
                        </ul>
                    </li>
                    <li>Each record in the "RECORDS" array MUST be a JSON object containing at least one field</li>
                    <li>All values MUST be JSON strings (no numbers, booleans, null, or nested objects/arrays)</li>
                </ul>

                <h3>2.2 Field Requirements</h3>
                <ul>
                    <li>All field names (keys) MUST be UPPERCASE. (json keys are case-sensitive) </li>
                    <li>Field names MUST follow all ADIF naming conventions</li>
                    <li>Field values MUST be strings, following JSON string encoding rules</li>
                </ul>

                <h3>2.3 Character Encoding</h3>
                <ul>
                    <li>The JSON standard requires UTF-8 encoding.</li>
                    <li>For backward compatability, when converting ADIJ to ADI, field lengths MUST be measured in
                        bytes, not characters/runes to avoid backward compatibility issues.</li>
                    <li>The use of _INTL fields is deprecated in favor of encouraging UTF-8 encoding in the
                        corresponding non _INTL field.</li>
                </ul>

                <h3>2.4 Media Types</h3>
                <p>The following media types are defined for ADIF variants:</p>
                <ul>
                    <li><code>application/x-adif-json</code> - ADIF in JSON format</li>
                    <li><code>application/x-adif-adi</code> - ADIF in ADI format</li>
                    <li><code>application/x-adif-xml</code> - ADIF in XML format</li>
                </ul>

                <h2>4. Implementation Notes</h2>
                <ul>
                    <li>Implementations MUST reject documents that do not conform to standard JSON syntax</li>
                </ul>

                <hgroup></hgroup>
                <h2>5. A Bridge Too Far</h2>
                <small><a href="https://www.adif.org/315/ADIF_315.htm#Upward_Compatibility">Policy II.A</a>: From one
                    version of ADIF to the next, Data Types, Enumerations, Fields, and Formats shall be upwardly
                    compatible, meaning that an ADIF file compliant with ADIF version N will comply with any future ADIF
                    version M where M>N. </small>
                </hgroup>
                <ul>
                    <li>It is further proposed that the ADIF group depreciate the ADX file format. It is unloved and
                        rarely used.</li>
                    <li>It is further proposed that the ADIF group depreciate USERDEFn. ADIF is a data transfer
                        standard, not a database.</li>
                </ul>
            </article>
        </details>
        <details open>
            <summary role="button" class="secondary">Try It Now - Live Demo!</summary>
            <article>
                <p>Convert ADI to ADIJ and ADIJ to ADI with this online tool:</p>
                <form method="POST" enctype="multipart/form-data">
                    <fieldset>
                        <label for="file">Select a file to convert:</label>
                        <input type="file" id="file" name="file" accept=".adi,.adij" required>
                        <small>Supported file extensions: .adi and .adij</small>
                    </fieldset>
                    <button type="submit">Convert</button>
                </form>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">ADIF as JSON Samples</summary>
            <article>
                <h3>Sample 1</h3>
                <pre>{
  "RECORDS": [
    {
      "CALL": "W9PVA",
      "QSO_DATE": "20250805",
      "TIME_ON": "201506",
      "BAND": "40M",
      "MODE": "SSB",
      "MY_POTA_REF", "US-0817,US-4566,US-4576,US-4573,US-4578@US-WY"
    }
  ]
}

</pre>
                <h3>Sample 2</h3>
                <pre>{
  "HEADER": {
    "ADIF_VER": "3.1.5",
    "PROGRAMID": "K9CTS ADIF as JSON (ADIJ) DEMO"
  },
  "RECORDS": [
    {
      "CALL": "W9PVA",
      "QSO_DATE": "20250805",
      "TIME_ON": "201506",
      "BAND": "40M",
      "MODE": "SSB",
      "MY_POTA_REF", "US-0817,US-4566,US-4576,US-4573,US-4578@US-WY"
    },
    {
      "CALL": "K9CTS",
      "QSO_DATE": "20250806",
      "TIME_ON": "202522",
      "BAND": "40M",
      "MODE": "CW"
    }
  ]
}
</pre>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">API Documentation</summary>
            <article>
                <h2>API Endpoints</h2>

                <h3>Simple API Conversion</h3>
                <p>Convert ADIF data directly in the request body using specific content types:</p>

                <h4>Convert ADI to JSON</h4>
                <kbd>POST / Content-Type: application/x-adif-adi</kbd>
                <p>Send an ADI document in the request body to convert it to JSON.</p>

                <h4>Convert JSON to ADI</h4>
                <kbd>POST / Content-Type: application/x-adif-json</kbd>
                <p>Send a JSON document in the request body to convert it to ADI.</p>

                <h3>File Upload Conversion</h3>
                <kbd>POST / (multipart/form-data)</kbd>
                <p>
                    Upload a file to convert between ADIF formats. The multipart form data must include a field named
                    <code>"file"</code> containing the uploaded file.
                <ul>
                    <li>Upload an .adi file to convert it to .adij (ADIF as JSON)</li>
                    <li>Upload an .adij file to convert it to .adi (ADIF format)</li>
                </ul>
                </p>

                <h3>Response Codes</h3>
                <ul>
                    <li><strong>200 OK</strong> - Successful conversion</li>
                    <li><strong>400 Bad Request</strong> - Malformed input or invalid format</li>
                    <li><strong>415 Unsupported Media Type</strong> - Unsupported content type or file extension</li>
                    <li><strong>500 Internal Server Error</strong> - Something went wrong</li>
                </ul>

                <h3>Example Requests</h3>
                <div class="grid">
                    <article>
                        <header>ADI to JSON</header>
                        <kbd id="curl-simple-adi">curl -X POST -H "Content-Type: application/x-adif-adi" <span
                                class="url-placeholder">http://127.0.0.1:8080/</span> --data-binary @logfile.adi</kbd>
                        <small>Convert ADI content to JSON</small>
                    </article>
                    <article>
                        <header>JSON to ADI</header>
                        <kbd id="curl-simple-json">curl -X POST -H "Content-Type: application/x-adif-json" <span
                                class="url-placeholder">http://127.0.0.1:8080/</span> --data-binary @logfile.json</kbd>
                        <small>Convert JSON content to ADI</small>
                    </article>
                    <article>
                        <header>Multipart File Upload - ADI Conversion</header>
                        <kbd id="curl-adi">curl -X POST <span class="url-placeholder">http://127.0.0.1:8080/</span> -F
                            "file=@logfile.adi"</kbd>
                        <small>Convert .ADI file to .ADIJ</small>
                    </article>
                    <article>
                        <header>Multipart File Upload - ADIJ Conversion</header>
                        <kbd id="curl-adij">curl -X POST <span class="url-placeholder">http://127.0.0.1:8080/</span> -F
                            "file=@logfile.adij"</kbd>
                        <small>Convert .ADIJ file to .ADI</small>
                    </article>
                </div>
                <script>
                    // Update curl commands with current URL
                    const baseUrl = window.location.origin;
                    document.getElementById('curl-simple-adi').innerHTML = `curl -X POST -H "Content-Type: application/x-adif-adi" ${baseUrl}/ --data-binary @logfile.adi`;
                    document.getElementById('curl-simple-json').innerHTML = `curl -X POST -H "Content-Type: application/x-adif-json" ${baseUrl}/ --data-binary @logfile.json`;
                    document.getElementById('curl-adi').innerHTML = `curl -X POST ${baseUrl}/ -F "file=@logfile.adi"`;
                    document.getElementById('curl-adij').innerHTML = `curl -X POST ${baseUrl}/ -F "file=@logfile.adij"`;
                </script>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">Resources</summary>
            <article>
                <summary>Specification Resources</summary>
                <ul>
                    <li><a href="https://www.adif.org/">ADIF.org</a></li>
                    <li><a href="https://www.json.org/">JSON.org</a></li>
                    <li><a
                            href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">ECMA-404</a>
                    </li>
                </ul>
            </article>
            <article>
                <summary>Critical Analysis</summary>
                <p>
                    This section contains links to blogs and articles that provide analysis and feedback on the ADIF
                    format.
                    It is hoped that these will be useful in understanding ADIF strengths and weaknesses.
                </p>
                <ul>
                    <li><a href="https://tlfabian.blogspot.com/2016/07/musings-on-adif-file-format.html">Musings on ADIF
                            File Format</a></li>
                    <li><a href="https://github.com/k0swe/adif-json-protobuf">adif-json-protobuf</a></li>
                    <li><a href="https://github.com/flwyd/adif-multitool">adif-multitool - generates json, uses strong
                            types</a></li>
                    <li><a href="https://groups.io/g/adifdev/search?p=Created%2C%2Cjson%2C20%2C1%2C0%2C0&prev=1">ADIF
                            Workgroup Discussions</a></li>
                    <li>More articles to come as we do more research...</li>
                </ul>
            </article>
        </details>
    </main>


</body>

</html>