<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <title>ADIJ Proposal - ADIF as JSON</title>
    <link rel="stylesheet" href="/static/pico-2.1.1.indigo.min.css">
</head>

<body>
    <main class="container">
        <header>
            <hgroup>
                <h1>ADIF as JSON - A Proposal</h1>
                <h2>ADIJ Draft Proposal v1.0</h2>
            </hgroup>
        </header>
        <p>Lets improve the standard so that it doesn't require a PhD just to parse a log file.
            Something like JSON, the world's most ubiquitous data interchange format, ought to do!</p>
        <details>
            <summary role="button" class="secondary">Try It Now - Live Demo!</summary>
            <article>
                <p>Convert ADI to ADIJ and ADIJ to ADI with this online tool:</p>
                <form method="POST" enctype="multipart/form-data">
                    <fieldset>
                        <label for="file">Select a file to convert:</label>
                        <input type="file" id="file" name="file" accept=".adi,.adij" required>
                        <small>Supported extensions: .adi and .adij</small>
                    </fieldset>
                    <button type="submit">Convert</button>
                </form>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">ADIF as JSON Specification</summary>
            <article>
                <header>
                    <h1>ADIJ Specification</h1>
                    <small>Draft Proposal v1.0</small>
                </header>

                <h2>1. Overview</h2>
                <p>
                    ADIF as JSON (ADIJ) is a proposed modernization of the Amateur Data Interchange Format (ADIF) using JSON structure.
                    This format aims to maintain interoperability with existing ADIF data while providing better integration with modern software development practices.
                    The new .adij file format strictly adheres to the <a href="https://www.json.org/">JSON</a> / <a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">ECMA-404</a> specification.
                </p>

                <h2>2. Specification</h2>

                <h3>2.1 Document Structure</h3>
                <ul>
                    <li>An ADIJ document MUST be valid JSON as defined by <a href="https://www.json.org/">JSON.org</a> /
                        <a
                            href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">ECMA-404</a>
                    </li>
                    <li>The document MUST be a single JSON object containing:
                        <ul>
                            <li>An optional "HEADER" record object</li>
                            <li>A required "RECORDS" array of record objects</li>
                        </ul>
                    </li>
                    <li>A record is a json object containing one or more properties.</li>
                    <li>Each record in the "RECORDS" array MUST be a JSON object containing at least one property (representing an ADIF field)</li>
                    <li>All values MUST be JSON strings (no numbers, booleans, null, or nested objects/arrays)</li>
                </ul>

                <h3>2.2 Field Requirements</h3>
                <ul>
                    <li>All field names (keys) MUST be UPPERCASE. (json keys are case-sensitive) </li>
                    <li>Field names MUST follow all ADIF naming conventions</li>
                    <li>Field values MUST be strings, following JSON string encoding rules</li>
                </ul>

                <h3>2.3 Character Encoding</h3>
                <ul>
                    <li>The JSON standard requires UTF-8 encoding.</li>
                    <li>For backward compatability, when converting ADIJ to ADI, field lengths MUST be measured in bytes, not characters/runes to avoid backward compatibility issues.</li>
                    <li>The use of _INTL fields is deprecated in favor of encouraging UTF-8 encoding in the corresponding non _INTL field.</li>
                </ul>

                <h3>2.4 Media Types</h3>
                <p>The following media types are defined for ADIF variants:</p>
                <ul>
                    <li><code>application/x-adif-json</code> - ADIF in JSON format</li>
                    <li><code>application/x-adif-adi</code> - ADIF in ADI format</li>
                    <li><code>application/x-adif-xml</code> - ADIF in XML format</li>
                </ul>

                <h2>4. Implementation Notes</h2>
                <ul>
                    <li>Implementations MUST reject documents that do not conform to standard JSON syntax</li>
                </ul>

                <hgroup></hgroup>
                <h2>5. A Bridge Too Far</h2>
                <small><a href="https://www.adif.org/315/ADIF_315.htm#Upward_Compatibility">Policy II.A</a>: From one version of ADIF to the next, Data Types, Enumerations, Fields, and Formats shall be upwardly compatible, meaning that an ADIF file compliant with ADIF version N will comply with any future ADIF version M where M>N. </small>
                </hgroup>
                <ul>
                    <li>It is further proposed that the ADIF group depreciate the ADX file format. It is rarely used.</li>
                    <li>It is further proposed that the ADIF group depreciate USERDEFn. ADIF is best viewed as a data transfer standard, not a database.</li>
                </ul>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">ADIF as JSON Samples</summary>
            <article>
                <h3>Sample 1</h3>
                <pre>{
  "RECORDS": [
    {
      "CALL": "W9PVA",
      "QSO_DATE": "20250805",
      "TIME_ON": "201506",
      "BAND": "40M",
      "MODE": "SSB",
      "MY_POTA_REF": "US-0817,US-4566,US-4576,US-4573,US-4578@US-WY"
    }
  ]
}

</pre>
                <h3>Sample 2</h3>
                <pre>{
  "HEADER": {
    "ADIF_VER": "3.1.5",
    "PROGRAMID": "K9CTS ADIF as JSON (ADIJ) DEMO"
  },
  "RECORDS": [
    {
      "CALL": "W9PVA",
      "QSO_DATE": "20250805",
      "TIME_ON": "201506",
      "BAND": "40M",
      "MODE": "SSB",
      "MY_POTA_REF": "US-0817,US-4566,US-4576,US-4573,US-4578@US-WY"
    },
    {
      "CALL": "K9CTS",
      "QSO_DATE": "20250806",
      "TIME_ON": "202522",
      "BAND": "40M",
      "MODE": "CW"
    }
  ]
}
</pre>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">API Documentation</summary>
            <article>
                <h2>API Endpoints</h2>

                <p>This website provides a simple API for converting ADIF data between ADI and ADIJ formats.</p>

                <h4>Convert ADI to JSON</h4>
                <kbd>POST <span class="base-url">http://127.0.0.1:8080/</span> Content-Type:
                    application/x-adif-adi</kbd>
                <p>Send an ADI document in the request body to convert it to JSON.</p>

                <h4>Convert JSON to ADI</h4>
                <kbd>POST <span class="base-url">http://127.0.0.1:8080/</span> Content-Type:
                    application/x-adif-json</kbd>
                <p>Send a JSON document in the request body to convert it to ADI.</p>

                <h3>File Upload Conversion</h3>
                <kbd>POST <span class="base-url">http://127.0.0.1:8080/</span> (multipart/form-data)</kbd>
                <p>
                    Upload a file to convert between ADIF formats. The multipart form data must include a field named
                    <code>"file"</code> containing the uploaded file.
                <ul>
                    <li>Upload an .adi file to convert it to .adij (ADIF as JSON)</li>
                    <li>Upload an .adij file to convert it to .adi (ADIF format)</li>
                </ul>
                </p>

                <h3>Response Codes</h3>
                <ul>
                    <li><strong>200 OK</strong> - Successful conversion</li>
                    <li><strong>400 Bad Request</strong> - Malformed input or invalid format</li>
                    <li><strong>415 Unsupported Media Type</strong> - Unsupported content type or file extension</li>
                    <li><strong>500 Internal Server Error</strong> - Something went wrong</li>
                </ul>

                <h3>Example Requests</h3>
                <div class="grid">
                    <article>
                        <header>ADI to JSON</header>
                        <kbd id="curl-simple-adi">curl -X POST -H "Content-Type: application/x-adif-adi" <span
                                class="base-url">http://127.0.0.1:8080/</span> --data-binary @logfile.adi</kbd>
                        <small>Convert ADI content to JSON</small>
                    </article>
                    <article>
                        <header>JSON to ADI</header>
                        <kbd id="curl-simple-json">curl -X POST -H "Content-Type: application/x-adif-json" <span
                                class="base-url">http://127.0.0.1:8080/</span> --data-binary @logfile.json</kbd>
                        <small>Convert JSON content to ADI</small>
                    </article>
                    <article>
                        <header>Multipart File Upload - ADI Conversion</header>
                        <kbd id="curl-adi">curl -X POST <span class="base-url">http://127.0.0.1:8080/</span> -F
                            "file=@logfile.adi"</kbd>
                        <small>Convert .ADI file to .ADIJ</small>
                    </article>
                    <article>
                        <header>Multipart File Upload - ADIJ Conversion</header>
                        <kbd id="curl-adij">curl -X POST <span class="base-url">http://127.0.0.1:8080/</span> -F
                            "file=@logfile.adij"</kbd>
                        <small>Convert .ADIJ file to .ADI</small>
                    </article>
                </div>
                <script>
                    // Update all base URLs with current host
                    const baseUrl = window.location.origin;
                    const baseUrlElements = document.querySelectorAll('.base-url');
                    baseUrlElements.forEach(element => {
                        element.textContent = `${baseUrl}/`;
                    });
                </script>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">Resources</summary>
            <article>
                <summary>Specification Resources</summary>
                <ul>
                    <li><a href="https://www.adif.org/">ADIF.org</a></li>
                    <li><a href="https://www.json.org/">JSON.org</a></li>
                    <li><a
                            href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/">ECMA-404</a>
                    </li>
                </ul>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">FAQ</summary>
            <article>
                <summary>Frequently Asked Questions</summary>
                <ul>
                    <li>Why choose UTF-8?
                        <ul>
                            <li>
                                The ADIF spec utilizes UTF-8 in XML.
                                To keep it simple, we avoid introducing new encodings.
                            </li>
                            <li>ASCII is fully forward compatible with UTF-8.</li>
                            <li>The JSON RFC requires the use of UTF-8.</li>
                            <li>Existing ADI parsers will be able to navigate a UTF-8 based structure corectly.</li>
                            <li>
                                Existing ADI software MAY show "garbled" characters if they process an ADI file with UTF-8.
                                This is an acceptable risk.
                                They are unlikely to corrupt the data because they'll assume it as an ASCII byte stream and preserve the characters, unchanged.
                            </li>
                        </ul>
                    </li>
                    <li>Why are all values stored as strings instead of being strongly typed?
                        <ul>
                            <li>ADIJ aims to replace the ADI data structures, which represent all data as ASCII strings.</li>
                            <li>This proposal aims to make converting between ADI and ADIJ seemless.</li>
                        </ul>
                    </li>
                    <li>Why doesn't ADIJ allow explicit data type definitions?
                        <ul>
                            <li>The type of the data can be inferred from the field name.</li>
                            <li>For example, CALL is always an ADIF "String"</li>
                            <li>For example, Frequency is always an ADIF "Number"</li>
                            <li>Likewise, APP_ fields rarely declare their data type and expect the processing program to know what to do if the program is aware of the APP_ field.</li>
                        </ul>
                    </li>
                    <li>Why should we depreciate the _INTL fields?
                        <ul>
                            <li>
                                _INTL fields are only present in ADIF XML documents.
                                Programs converting from XML to ADI must already account for this fact.
                            </li>
                            <li>Removing _INTL fields makes converting between ADI and ADIJ very simple.</li>
                            <li>
                                ADIF has NO backwards compatability guarantee.
                                It DOES have a forward compatability guarantee.
                            </li>
                            <li>ADIF has a long history of depreciating fields that have lost their relevance.</li>
                            <li>All modern programming languages support UTF-8</li>
                            <li>
                                ADI Files produced by ASCII only software will work correctly with software implementing ADIJ.
                                This meets the ADIF forward compatibility guarantee.
                            </li>
                            <li>
                                New, UTF-8 Files ingested by older software may display some strings incorrectly.
                                They will, however, be able to correctly navigate the file structure because the length is defined as the number of bytes.
                            </li>
                        </ul>
                    </li>
                </ul>
            </article>
        </details>
        <details>
            <summary role="button" class="secondary">Critical Analysis</summary>
            <article>
                <p>
                    This section contains links to blogs and articles that provide analysis and feedback on the ADIF
                    format.
                    It is hoped that these will be useful in understanding ADIF strengths and weaknesses.
                </p>
                <ul>
                    <li><a href="https://tlfabian.blogspot.com/2016/07/musings-on-adif-file-format.html">Musings on ADIF
                            File Format</a></li>
                    <li><a href="https://github.com/k0swe/adif-json-protobuf">adif-json-protobuf</a></li>
                    <li><a href="https://github.com/flwyd/adif-multitool">adif-multitool - generates json, uses strong
                            types</a></li>
                    <li><a href="https://groups.io/g/adifdev/search?p=Created%2C%2Cjson%2C20%2C1%2C0%2C0&prev=1">ADIF
                            Workgroup Discussions</a></li>
                    <li>More articles to come as we do more research...</li>
                </ul>
            </article>
        </details>
        <footer>
            <p style="text-align: center; margin-top: 1rem;">
                <a href="https://github.com/hamradiolog-net/adij.hamradiolog.net" target="_blank"
                    rel="noopener noreferrer">
                    <img src="https://img.shields.io/badge/GitHub-Source%20Code-blue?style=for-the-badge&logo=github"
                        alt="View Source Code on GitHub" style="border: none;">
                </a>
            </p>
        </footer>
    </main>


</body>

</html>